<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إضافة هدف - [اسم الموقع]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="js/main.js"></script>

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #1c1f2b;
            color: #eaeaea;
        }
        .navbar {
            background-color: #2a2f40;
        }
        .content {
            padding: 2rem;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">لوحة التحكم</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="goals.html">الأهداف</a></li>
                <li class="nav-item"><a class="nav-link" href="budget.html">الميزانية</a></li>
                <li class="nav-item"><a class="nav-link" href="transactions.html">المعاملات</a></li>
                <li class="nav-item"><a class="nav-link" href="reports.html">التقارير</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
    <h1 class="mb-4">إضافة هدف جديد</h1>
    <form id="goalForm">
        <div class="mb-3">
            <label for="goalTitle" class="form-label">عنوان الهدف</label>
            <input type="text" class="form-control" id="goalTitle" required>
        </div>
        <div class="mb-3">
            <label for="targetAmount" class="form-label">المبلغ المستهدف</label>
            <input type="number" class="form-control" id="targetAmount" min="1" required>
        </div>
        <div class="mb-3">
            <label for="targetDate" class="form-label">تاريخ الهدف</label>
            <input type="date" class="form-control" id="targetDate" required>
        </div>
        <div class="mb-3">
            <label for="goalCategory" class="form-label">الفئة</label>
            <select class="form-select" id="goalCategory" required>
                <option value="travel">سفر</option>
                <option value="car">سيارة</option>
                <option value="house">منزل</option>
                <option value="education">تعليم</option>
                <option value="other">أخرى</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="goalDescription" class="form-label">وصف الهدف (اختياري)</label>
            <textarea class="form-control" id="goalDescription" rows="3"></textarea>
        </div>
        <button type="button" class="btn btn-primary" onclick="createGoal()">حفظ الهدف</button>
    </form>

    <footer class="footer text-center mt-4">
        <p>© 2023 [اسم الموقع]. جميع الحقوق محفوظة.</p>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    //const url = 'http://localhost:9050/api/goals'; // URL للخادم

    async function createGoal() {
        const goalData = {
            title: document.getElementById('goalTitle').value,
            targetAmount: parseFloat(document.getElementById('targetAmount').value),
            targetDate: document.getElementById('targetDate').value,
            category: document.getElementById('goalCategory').value,
            description: document.getElementById('goalDescription').value,
            userId: localStorage.getItem('userId') // تأكد من تخزين userId في localStorage
        };

        try {
            await axios.post(url, goalData);
            alert('تم إنشاء الهدف بنجاح!');
            window.location.href = 'goals.html'; // العودة إلى صفحة الأهداف
        } catch (error) {
            console.error('Error creating goal:', error);
            alert('حدث خطأ أثناء إنشاء الهدف.');
        }
    }
</script>
</body>
</html>